<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Recoding to and from NA with mde • Missing Data Explorer</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/darkly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Recoding to and from NA with mde">
<meta property="og:description" content="mde">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">Missing Data Explorer</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/mde_vignette.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Tutorials
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/missingness.html">Exploring Missingess</a>
    </li>
    <li>
      <a href="../articles/recoding.html">Recoding to and from NA</a>
    </li>
    <li>
      <a href="../news/index.html">Changes</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/Nelson-Gon/mde/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="recoding_files/header-attrs-2.9/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Recoding to and from NA with mde</h1>
            
            <h4 class="date">2021-07-24</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/Nelson-Gon/mde/blob/master/vignettes/recoding.rmd"><code>vignettes/recoding.rmd</code></a></small>
      <div class="hidden name"><code>recoding.rmd</code></div>

    </div>

    
    
<!-- badges: start -->
<p><a href="https://doi.org/10.5281/zenodo.3890659"><img src="https://zenodo.org/badge/DOI/10.5281/zenodo.3890659.svg" alt="DOI"></a> <a href="https://cran.r-project.org/package=mde"><img src="https://r-pkg.org/badges/version/mde" alt="CRAN_Status_Badge"></a> <a href="https://CRAN.R-project.org/package=mde"><img src="https://www.r-pkg.org/badges/version-ago/mde" alt="CRAN_Release_Badge"></a> <a href="https://codecov.io/gh/Nelson-Gon/mde?branch=master"><img src="https://codecov.io/gh/Nelson-Gon/mde/branch/master/graph/badge.svg" alt="Codecov test coverage"></a> <a href="https://travis-ci.com/Nelson-Gon/mde"><img src="https://travis-ci.com/Nelson-Gon/mde.png?branch=master" alt="Build Status"></a> <img src="https://github.com/Nelson-Gon/mde/workflows/R-CMD-check-devel/badge.svg" alt="R-CMD-check-devel"><img src="https://github.com/Nelson-Gon/mde/workflows/test-coverage/badge.svg" alt="test-coverage"><a href="https://www.repostatus.org/"><img src="https://www.repostatus.org/badges/latest/active.svg" alt="Project Status"></a> <a href="https://lifecycle.r-lib.org/articles/stages.html"><img src="https://img.shields.io/badge/lifecycle-maturing-blue.svg" alt="lifecycle"></a> <a href="https://www.gnu.org/licenses/gpl-3.0.en.html"><img src="https://img.shields.io/badge/license-GPL--3-blue.svg" alt="license"></a> <a href="https://cran.r-project.org/package=mde"><img src="https://cranlogs.r-pkg.org/badges/mde" alt="Downloads"></a> <a href="https://cran.r-project.org/package=mde"><img src="https://cranlogs.r-pkg.org/badges/grand-total/mde?color=green" alt="TotalDownloads"></a> <a href="https://github.com/Nelson-Gon/mde/commits/master"><img src="https://img.shields.io/github/last-commit/Nelson-Gon/mde.svg" alt="GitHub last commit"></a> <a href="https://GitHub.com/Nelson-Gon/mde/issues/"><img src="https://img.shields.io/github/issues/Nelson-Gon/mde.svg" alt="GitHub issues"></a> <a href="https://GitHub.com/Nelson-Gon/mde/issues?q=is%3Aissue+is%3Aclosed"><img src="https://img.shields.io/github/issues-closed/Nelson-Gon/mde.svg" alt="GitHub issues-closed"></a> <a href="https://isitmaintained.com/project/Nelson-Gon/mde" title="Average time to resolve an issue"><img src="https://isitmaintained.com/badge/resolution/Nelson-Gon/mde.svg" alt="Average time to resolve an issue"></a> <a href="https://makeapullrequest.com"><img src="https://img.shields.io/badge/PRs-welcome-brightgreen.svg?style=flat-square" alt="PRs Welcome"></a> <a href="https://GitHub.com/Nelson-Gon/mde/graphs/commit-activity"><img src="https://img.shields.io/badge/Maintained%3F-yes-green.svg" alt="Maintenance"></a> <!-- badges: end --></p>
<p><img src="https://github.com/Nelson-Gon/mde/blob/master/man/figures/mde_icon_2.png?raw=true" align="right" height="120" width="120"></p>
<p>The goal of <code>mde</code> is to ease exploration of missingness.</p>
<p><strong>Loading the package</strong></p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/Nelson-Gon/mde">mde</a></span><span class="op">)</span>
<span class="co">#&gt; Welcome to mde. This is mde version 0.3.1.</span>
<span class="co">#&gt;  Please file issues and feedback at https://www.github.com/Nelson-Gon/mde/issues</span>
<span class="co">#&gt; Turn this message off using 'suppressPackageStartupMessages(library(mde))'</span>
<span class="co">#&gt;  Happy Exploration :)</span></code></pre></div>
<div id="recoding-as-na" class="section level1">
<h1 class="hasAnchor">
<a href="#recoding-as-na" class="anchor"></a>Recoding as NA</h1>
<ul>
<li><code>recode_as_na</code></li>
</ul>
<p>As the name might imply, this converts any value or vector of values to <code>NA</code> i.e. we take a value such as “missing” or “NA” (not a real <code>NA</code> according to <code>R</code>) and convert it to R’s known handler for missing values (<code>NA</code>).</p>
<p>To use the function out of the box (with default arguments), one simply does something like:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="va">dummy_test</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>ID <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"A"</span>,<span class="st">"B"</span>,<span class="st">"B"</span>,<span class="st">"A"</span><span class="op">)</span>, 
                         values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"n/a"</span>,<span class="cn">NA</span>,<span class="st">"Yes"</span>,<span class="st">"No"</span><span class="op">)</span><span class="op">)</span>
<span class="co"># Convert n/a and no to NA</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fu"><a href="../reference/recode_as_na.html">recode_as_na</a></span><span class="op">(</span><span class="va">dummy_test</span>, value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"n/a"</span>,<span class="st">"No"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt;   ID values</span>
<span class="co">#&gt; 1  A   &lt;NA&gt;</span>
<span class="co">#&gt; 2  B   &lt;NA&gt;</span>
<span class="co">#&gt; 3  B    Yes</span>
<span class="co">#&gt; 4  A   &lt;NA&gt;</span></code></pre></div>
<p>Great, but I want to do so for specific columns not the entire dataset. You can do this by providing column names to <code>subset_cols</code>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R">

<span class="va">another_dummy</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>ID <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, Subject <span class="op">=</span> <span class="fl">7</span><span class="op">:</span><span class="fl">11</span>, 
Change <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"missing"</span>,<span class="st">"n/a"</span>,<span class="fl">2</span><span class="op">:</span><span class="fl">4</span> <span class="op">)</span><span class="op">)</span>
<span class="co"># Only change values at the column Change</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fu"><a href="../reference/recode_as_na.html">recode_as_na</a></span><span class="op">(</span><span class="va">another_dummy</span>, subset_cols <span class="op">=</span> <span class="st">"Change"</span>, value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"n/a"</span>,<span class="st">"missing"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt;   ID Subject Change</span>
<span class="co">#&gt; 1  1       7   &lt;NA&gt;</span>
<span class="co">#&gt; 2  2       8   &lt;NA&gt;</span>
<span class="co">#&gt; 3  3       9      2</span>
<span class="co">#&gt; 4  4      10      3</span>
<span class="co">#&gt; 5  5      11      4</span></code></pre></div>
<p>To recode columns using <a href="https://en.wikipedia.org/wiki/Regular_expression">RegEx</a>,one can provide <code>pattern_type</code> and a target <code>pattern</code>. Currently supported <code>pattern_types</code> are <code>starts_with</code>, <code>ends_with</code>, <code>contains</code> and <code>regex</code>. See docs for more details.:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># only change at columns that start with Solar</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fu"><a href="../reference/recode_as_na.html">recode_as_na</a></span><span class="op">(</span><span class="va">airquality</span>,value<span class="op">=</span><span class="fl">190</span>,pattern_type<span class="op">=</span><span class="st">"starts_with"</span>,pattern<span class="op">=</span><span class="st">"Solar"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt;   Ozone Solar.R Wind Temp Month Day</span>
<span class="co">#&gt; 1    41      NA  7.4   67     5   1</span>
<span class="co">#&gt; 2    36     118  8.0   72     5   2</span>
<span class="co">#&gt; 3    12     149 12.6   74     5   3</span>
<span class="co">#&gt; 4    18     313 11.5   62     5   4</span>
<span class="co">#&gt; 5    NA      NA 14.3   56     5   5</span>
<span class="co">#&gt; 6    28      NA 14.9   66     5   6</span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># recode at columns that start with O or S(case sensitive)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fu"><a href="../reference/recode_as_na.html">recode_as_na</a></span><span class="op">(</span><span class="va">airquality</span>,value<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">67</span>,<span class="fl">118</span><span class="op">)</span>,pattern_type<span class="op">=</span><span class="st">"starts_with"</span>,pattern<span class="op">=</span><span class="st">"S|O"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt;   Ozone Solar.R Wind Temp Month Day</span>
<span class="co">#&gt; 1    41     190  7.4   67     5   1</span>
<span class="co">#&gt; 2    36      NA  8.0   72     5   2</span>
<span class="co">#&gt; 3    12     149 12.6   74     5   3</span>
<span class="co">#&gt; 4    18     313 11.5   62     5   4</span>
<span class="co">#&gt; 5    NA      NA 14.3   56     5   5</span>
<span class="co">#&gt; 6    28      NA 14.9   66     5   6</span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># use my own RegEx</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fu"><a href="../reference/recode_as_na.html">recode_as_na</a></span><span class="op">(</span><span class="va">airquality</span>,value<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">67</span>,<span class="fl">118</span><span class="op">)</span>,pattern_type<span class="op">=</span><span class="st">"regex"</span>,pattern<span class="op">=</span><span class="st">"(?i)^(s|o)"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt;   Ozone Solar.R Wind Temp Month Day</span>
<span class="co">#&gt; 1    41     190  7.4   67     5   1</span>
<span class="co">#&gt; 2    36      NA  8.0   72     5   2</span>
<span class="co">#&gt; 3    12     149 12.6   74     5   3</span>
<span class="co">#&gt; 4    18     313 11.5   62     5   4</span>
<span class="co">#&gt; 5    NA      NA 14.3   56     5   5</span>
<span class="co">#&gt; 6    28      NA 14.9   66     5   6</span></code></pre></div>
<ul>
<li><code>recode_as_na_if</code></li>
</ul>
<p>This function allows one to deliberately introduce missing values if a column meets a certain threshold of missing values. This is similar to <code>amputation</code> but is much more basic. It is only provided here because it is hoped it may be useful to someone for whatever reason.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fu"><a href="../reference/recode_as_na_if.html">recode_as_na_if</a></span><span class="op">(</span><span class="va">airquality</span>,sign<span class="op">=</span><span class="st">"gt"</span>, percent_na<span class="op">=</span><span class="fl">20</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt;   Ozone Solar.R Wind Temp Month Day</span>
<span class="co">#&gt; 1    NA     190  7.4   67     5   1</span>
<span class="co">#&gt; 2    NA     118  8.0   72     5   2</span>
<span class="co">#&gt; 3    NA     149 12.6   74     5   3</span>
<span class="co">#&gt; 4    NA     313 11.5   62     5   4</span>
<span class="co">#&gt; 5    NA      NA 14.3   56     5   5</span>
<span class="co">#&gt; 6    NA      NA 14.9   66     5   6</span></code></pre></div>
<ul>
<li><code>recode_as_na_str</code></li>
</ul>
<p>This allows recoding as <code>NA</code> based on a string match.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="va">partial_match</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>A<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Hi"</span>,<span class="st">"match_me"</span>,<span class="st">"nope"</span><span class="op">)</span>, B<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="st">"not_me"</span>,<span class="st">"nah"</span><span class="op">)</span><span class="op">)</span>

<span class="fu"><a href="../reference/recode_as_na_str.html">recode_as_na_str</a></span><span class="op">(</span><span class="va">partial_match</span>,<span class="st">"ends_with"</span>,<span class="st">"ME"</span>, case_sensitive<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span>
<span class="co">#&gt;      A    B</span>
<span class="co">#&gt; 1   Hi &lt;NA&gt;</span>
<span class="co">#&gt; 2 &lt;NA&gt; &lt;NA&gt;</span>
<span class="co">#&gt; 3 nope  nah</span></code></pre></div>
<ul>
<li><code>recode_as_na_for</code></li>
</ul>
<p>For all values greater/less/less or equal/greater or equal than some value, can I convert them to <code>NA</code>?!</p>
<p><strong>Yes You Can!</strong> All we have to do is use <code>recode_as_na_for</code>:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fu"><a href="../reference/recode_as_na_for.html">recode_as_na_for</a></span><span class="op">(</span><span class="va">airquality</span>,criteria<span class="op">=</span><span class="st">"gt"</span>,value<span class="op">=</span><span class="fl">25</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt;   Ozone Solar.R Wind Temp Month Day</span>
<span class="co">#&gt; 1    NA      NA  7.4   NA     5   1</span>
<span class="co">#&gt; 2    NA      NA  8.0   NA     5   2</span>
<span class="co">#&gt; 3    12      NA 12.6   NA     5   3</span>
<span class="co">#&gt; 4    18      NA 11.5   NA     5   4</span>
<span class="co">#&gt; 5    NA      NA 14.3   NA     5   5</span>
<span class="co">#&gt; 6    NA      NA 14.9   NA     5   6</span></code></pre></div>
<p>To do so at specific columns, pass an optional <code>subset_cols</code> character vector:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fu"><a href="../reference/recode_as_na_for.html">recode_as_na_for</a></span><span class="op">(</span><span class="va">airquality</span>, value<span class="op">=</span><span class="fl">40</span>,subset_cols<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Solar.R"</span>,<span class="st">"Ozone"</span><span class="op">)</span>, criteria<span class="op">=</span><span class="st">"gt"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt;   Ozone Solar.R Wind Temp Month Day</span>
<span class="co">#&gt; 1    NA      NA  7.4   67     5   1</span>
<span class="co">#&gt; 2    36      NA  8.0   72     5   2</span>
<span class="co">#&gt; 3    12      NA 12.6   74     5   3</span>
<span class="co">#&gt; 4    18      NA 11.5   62     5   4</span>
<span class="co">#&gt; 5    NA      NA 14.3   56     5   5</span>
<span class="co">#&gt; 6    28      NA 14.9   66     5   6</span></code></pre></div>
</div>
<div id="recoding-na-as" class="section level1">
<h1 class="hasAnchor">
<a href="#recoding-na-as" class="anchor"></a>Recoding NA as</h1>
<ul>
<li><code>recode_na_as</code></li>
</ul>
<p>Sometimes, for whatever reason, one would like to replace <code>NA</code>s with whatever value they would like. <code>recode_na_as</code> provides a very simple way to do just that.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fu"><a href="../reference/recode_na_as.html">recode_na_as</a></span><span class="op">(</span><span class="va">airquality</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt;   Ozone Solar.R Wind Temp Month Day</span>
<span class="co">#&gt; 1    41     190  7.4   67     5   1</span>
<span class="co">#&gt; 2    36     118  8.0   72     5   2</span>
<span class="co">#&gt; 3    12     149 12.6   74     5   3</span>
<span class="co">#&gt; 4    18     313 11.5   62     5   4</span>
<span class="co">#&gt; 5     0       0 14.3   56     5   5</span>
<span class="co">#&gt; 6    28       0 14.9   66     5   6</span>

<span class="co"># use NaN</span>

<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fu"><a href="../reference/recode_na_as.html">recode_na_as</a></span><span class="op">(</span><span class="va">airquality</span>, value<span class="op">=</span><span class="cn">NaN</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt;   Ozone Solar.R Wind Temp Month Day</span>
<span class="co">#&gt; 1    41     190  7.4   67     5   1</span>
<span class="co">#&gt; 2    36     118  8.0   72     5   2</span>
<span class="co">#&gt; 3    12     149 12.6   74     5   3</span>
<span class="co">#&gt; 4    18     313 11.5   62     5   4</span>
<span class="co">#&gt; 5   NaN     NaN 14.3   56     5   5</span>
<span class="co">#&gt; 6    28     NaN 14.9   66     5   6</span></code></pre></div>
<p>As a “bonus”, you can manipulate the data only at specific columns as shown here:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fu"><a href="../reference/recode_na_as.html">recode_na_as</a></span><span class="op">(</span><span class="va">airquality</span>, value<span class="op">=</span><span class="fl">0</span>, subset_cols<span class="op">=</span><span class="st">"Ozone"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt;   Ozone Solar.R Wind Temp Month Day</span>
<span class="co">#&gt; 1    41     190  7.4   67     5   1</span>
<span class="co">#&gt; 2    36     118  8.0   72     5   2</span>
<span class="co">#&gt; 3    12     149 12.6   74     5   3</span>
<span class="co">#&gt; 4    18     313 11.5   62     5   4</span>
<span class="co">#&gt; 5     0      NA 14.3   56     5   5</span>
<span class="co">#&gt; 6    28      NA 14.9   66     5   6</span></code></pre></div>
<p>The above also supports custom recoding similar to <code>recode_na_as</code>:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fu">mde</span><span class="fu">::</span><span class="fu"><a href="../reference/recode_na_as.html">recode_na_as</a></span><span class="op">(</span><span class="va">airquality</span>, value<span class="op">=</span><span class="fl">0</span>, pattern_type<span class="op">=</span><span class="st">"starts_with"</span>,pattern<span class="op">=</span><span class="st">"Solar"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt;   Ozone Solar.R Wind Temp Month Day</span>
<span class="co">#&gt; 1    41     190  7.4   67     5   1</span>
<span class="co">#&gt; 2    36     118  8.0   72     5   2</span>
<span class="co">#&gt; 3    12     149 12.6   74     5   3</span>
<span class="co">#&gt; 4    18     313 11.5   62     5   4</span>
<span class="co">#&gt; 5    NA       0 14.3   56     5   5</span>
<span class="co">#&gt; 6    28       0 14.9   66     5   6</span></code></pre></div>
<ul>
<li><code>column_based_recode</code></li>
</ul>
<p>Ever needed to change values in a given column based on the proportions of <code>NA</code>s in other columns(row-wise)?!. The goal of <code>column_based_recode</code> is to achieve just that. Let’s see how we could do this with a simple example:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R">

<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fu"><a href="../reference/column_based_recode.html">column_based_recode</a></span><span class="op">(</span><span class="va">airquality</span>, values_from <span class="op">=</span> <span class="st">"Wind"</span>, values_to<span class="op">=</span><span class="st">"Wind"</span>, pattern_type <span class="op">=</span> <span class="st">"regex"</span>, pattern <span class="op">=</span> <span class="st">"Solar|Ozone"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt;   Ozone Solar.R Wind Temp Month Day</span>
<span class="co">#&gt; 1    41     190  7.4   67     5   1</span>
<span class="co">#&gt; 2    36     118  8.0   72     5   2</span>
<span class="co">#&gt; 3    12     149 12.6   74     5   3</span>
<span class="co">#&gt; 4    18     313 11.5   62     5   4</span>
<span class="co">#&gt; 5    NA      NA  0.0   56     5   5</span>
<span class="co">#&gt; 6    28      NA 14.9   66     5   6</span></code></pre></div>
<ul>
<li><code>custom_na_recode</code></li>
</ul>
<p>This allows recoding <code>NA</code> values with common stats functions such as <code>mean</code>,<code>max</code>,<code>min</code>,<code>sd</code>.</p>
<p>To use default values:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fu"><a href="../reference/custom_na_recode.html">custom_na_recode</a></span><span class="op">(</span><span class="va">airquality</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt;      Ozone  Solar.R Wind Temp Month Day</span>
<span class="co">#&gt; 1 41.00000 190.0000  7.4   67     5   1</span>
<span class="co">#&gt; 2 36.00000 118.0000  8.0   72     5   2</span>
<span class="co">#&gt; 3 12.00000 149.0000 12.6   74     5   3</span>
<span class="co">#&gt; 4 18.00000 313.0000 11.5   62     5   4</span>
<span class="co">#&gt; 5 42.12931 185.9315 14.3   56     5   5</span>
<span class="co">#&gt; 6 28.00000 185.9315 14.9   66     5   6</span></code></pre></div>
<p>To use select columns:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R">


<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fu"><a href="../reference/custom_na_recode.html">custom_na_recode</a></span><span class="op">(</span><span class="va">airquality</span>,func<span class="op">=</span><span class="st">"mean"</span>,across_columns<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Solar.R"</span>,<span class="st">"Ozone"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt;      Ozone  Solar.R Wind Temp Month Day</span>
<span class="co">#&gt; 1 41.00000 190.0000  7.4   67     5   1</span>
<span class="co">#&gt; 2 36.00000 118.0000  8.0   72     5   2</span>
<span class="co">#&gt; 3 12.00000 149.0000 12.6   74     5   3</span>
<span class="co">#&gt; 4 18.00000 313.0000 11.5   62     5   4</span>
<span class="co">#&gt; 5 42.12931 185.9315 14.3   56     5   5</span>
<span class="co">#&gt; 6 28.00000 185.9315 14.9   66     5   6</span></code></pre></div>
<p>To use a function from another package to perform replacements:</p>
<p>To perform a forward fill with <code>dplyr</code>’s <code>lead</code>:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co"># use lag for a backfill</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fu"><a href="../reference/custom_na_recode.html">custom_na_recode</a></span><span class="op">(</span><span class="va">airquality</span>,func<span class="op">=</span><span class="fu">dplyr</span><span class="fu">::</span><span class="va"><a href="https://dplyr.tidyverse.org/reference/lead-lag.html">lead</a></span> <span class="op">)</span><span class="op">)</span>
<span class="co">#&gt;   Ozone Solar.R Wind Temp Month Day</span>
<span class="co">#&gt; 1    41     190  7.4   67     5   1</span>
<span class="co">#&gt; 2    36     118  8.0   72     5   2</span>
<span class="co">#&gt; 3    12     149 12.6   74     5   3</span>
<span class="co">#&gt; 4    18     313 11.5   62     5   4</span>
<span class="co">#&gt; 5    23      99 14.3   56     5   5</span>
<span class="co">#&gt; 6    28      19 14.9   66     5   6</span></code></pre></div>
<p>To perform replacement by group:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="va">some_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>ID<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"A1"</span>,<span class="st">"A1"</span>,<span class="st">"A1"</span>,<span class="st">"A2"</span>,<span class="st">"A2"</span>, <span class="st">"A2"</span><span class="op">)</span>,A<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">5</span>,<span class="cn">NA</span>,<span class="fl">0</span>,<span class="fl">8</span>,<span class="fl">3</span>,<span class="fl">4</span><span class="op">)</span>,B<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">10</span>,<span class="fl">0</span>,<span class="fl">0</span>,<span class="cn">NA</span>,<span class="fl">5</span>,<span class="fl">6</span><span class="op">)</span>,C<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="cn">NA</span>,<span class="cn">NA</span>,<span class="fl">25</span>,<span class="fl">7</span>,<span class="fl">8</span><span class="op">)</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fu"><a href="../reference/custom_na_recode.html">custom_na_recode</a></span><span class="op">(</span><span class="va">some_data</span>,func <span class="op">=</span> <span class="st">"mean"</span>, grouping_cols <span class="op">=</span> <span class="st">"ID"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 6 x 4</span>
<span class="co">#&gt;   ID        A     B     C</span>
<span class="co">#&gt;   &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#&gt; 1 A1      5    10       1</span>
<span class="co">#&gt; 2 A1      2.5   0       1</span>
<span class="co">#&gt; 3 A1      0     0       1</span>
<span class="co">#&gt; 4 A2      8     5.5    25</span>
<span class="co">#&gt; 5 A2      3     5       7</span>
<span class="co">#&gt; 6 A2      4     6       8</span></code></pre></div>
<p>Across specific columns:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fu"><a href="../reference/custom_na_recode.html">custom_na_recode</a></span><span class="op">(</span><span class="va">some_data</span>,func <span class="op">=</span> <span class="st">"mean"</span>, grouping_cols <span class="op">=</span> <span class="st">"ID"</span>, across_columns <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"C"</span>, <span class="st">"A"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 6 x 4</span>
<span class="co">#&gt;   ID        A     B     C</span>
<span class="co">#&gt;   &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#&gt; 1 A1      5      10     1</span>
<span class="co">#&gt; 2 A1      2.5     0     1</span>
<span class="co">#&gt; 3 A1      0       0     1</span>
<span class="co">#&gt; 4 A2      8      NA    25</span>
<span class="co">#&gt; 5 A2      3       5     7</span>
<span class="co">#&gt; 6 A2      4       6     8</span></code></pre></div>
<ul>
<li><code>recode_na_if</code></li>
</ul>
<p>Given a <code>data.frame</code> object, one can recode <code>NA</code>s as another value based on a grouping variable. In the example below, we replace all <code>NA</code>s in all columns with 0s if the ID is <code>A2</code> or <code>A3</code></p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="va">some_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>ID<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"A1"</span>,<span class="st">"A2"</span>,<span class="st">"A3"</span>, <span class="st">"A4"</span><span class="op">)</span>, 
                        A<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">5</span>,<span class="cn">NA</span>,<span class="fl">0</span>,<span class="fl">8</span><span class="op">)</span>, B<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">10</span>,<span class="fl">0</span>,<span class="fl">0</span>,<span class="fl">1</span><span class="op">)</span>,
                        C<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="cn">NA</span>,<span class="cn">NA</span>,<span class="fl">25</span><span class="op">)</span><span class="op">)</span>
                        
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fu"><a href="../reference/recode_na_if.html">recode_na_if</a></span><span class="op">(</span><span class="va">some_data</span>,grouping_col<span class="op">=</span><span class="st">"ID"</span>, target_groups<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"A2"</span>,<span class="st">"A3"</span><span class="op">)</span>,
           replacement<span class="op">=</span> <span class="fl">0</span><span class="op">)</span><span class="op">)</span>   
<span class="co">#&gt; # A tibble: 4 x 4</span>
<span class="co">#&gt;   ID        A     B     C</span>
<span class="co">#&gt;   &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#&gt; 1 A1        5    10     1</span>
<span class="co">#&gt; 2 A2        0     0     0</span>
<span class="co">#&gt; 3 A3        0     0     0</span>
<span class="co">#&gt; 4 A4        8     1    25</span></code></pre></div>
</div>
<div id="dropping-missing-values" class="section level1">
<h1 class="hasAnchor">
<a href="#dropping-missing-values" class="anchor"></a>Dropping Missing Values</h1>
<ul>
<li><code>drop_na_if</code></li>
</ul>
<p>Suppose you wanted to drop any column that has a percentage of <code>NA</code>s greater than or equal to a certain value? <code>drop_na_if</code> does just that.</p>
<p>We can drop any columns that have greater than or equal(gteq) to 24% of the values missing from <code>airquality</code>:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fu"><a href="../reference/drop_na_if.html">drop_na_if</a></span><span class="op">(</span><span class="va">airquality</span>, sign<span class="op">=</span><span class="st">"gteq"</span>,percent_na <span class="op">=</span> <span class="fl">24</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt;   Solar.R Wind Temp Month Day</span>
<span class="co">#&gt; 1     190  7.4   67     5   1</span>
<span class="co">#&gt; 2     118  8.0   72     5   2</span>
<span class="co">#&gt; 3     149 12.6   74     5   3</span>
<span class="co">#&gt; 4     313 11.5   62     5   4</span>
<span class="co">#&gt; 5      NA 14.3   56     5   5</span>
<span class="co">#&gt; 6      NA 14.9   66     5   6</span></code></pre></div>
<p>The above also supports less than or equal to(<code>lteq</code>), equal to(<code>eq</code>), greater than(<code>gt</code>) and less than(<code>lt</code>).</p>
<p>To keep certain columns despite fitting the target <code>percent_na</code> criteria, one can provide an optional <code>keep_columns</code> character vector.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R">

<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fu"><a href="../reference/drop_na_if.html">drop_na_if</a></span><span class="op">(</span><span class="va">airquality</span>, percent_na <span class="op">=</span> <span class="fl">24</span>, keep_columns <span class="op">=</span> <span class="st">"Ozone"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt;   Ozone Solar.R Wind Temp Month Day</span>
<span class="co">#&gt; 1    41     190  7.4   67     5   1</span>
<span class="co">#&gt; 2    36     118  8.0   72     5   2</span>
<span class="co">#&gt; 3    12     149 12.6   74     5   3</span>
<span class="co">#&gt; 4    18     313 11.5   62     5   4</span>
<span class="co">#&gt; 5    NA      NA 14.3   56     5   5</span>
<span class="co">#&gt; 6    28      NA 14.9   66     5   6</span></code></pre></div>
<p>Compare the above result to the following:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fu"><a href="../reference/drop_na_if.html">drop_na_if</a></span><span class="op">(</span><span class="va">airquality</span>, percent_na <span class="op">=</span> <span class="fl">24</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt;   Solar.R Wind Temp Month Day</span>
<span class="co">#&gt; 1     190  7.4   67     5   1</span>
<span class="co">#&gt; 2     118  8.0   72     5   2</span>
<span class="co">#&gt; 3     149 12.6   74     5   3</span>
<span class="co">#&gt; 4     313 11.5   62     5   4</span>
<span class="co">#&gt; 5      NA 14.3   56     5   5</span>
<span class="co">#&gt; 6      NA 14.9   66     5   6</span></code></pre></div>
<p>To drop groups that meet a set missingness criterion, we proceed as follows.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">grouped_drop</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/structure.html">structure</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>ID <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"A"</span>, <span class="st">"B"</span><span class="op">)</span>, 
          Vals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">4</span>, <span class="cn">NA</span>,  <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span><span class="op">)</span>, Values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">6</span>, <span class="fl">7</span>, <span class="fl">8</span>, <span class="cn">NA</span><span class="op">)</span><span class="op">)</span>, 
          row.names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="op">-</span><span class="fl">5L</span><span class="op">)</span>, class <span class="op">=</span> <span class="st">"data.frame"</span><span class="op">)</span>
<span class="co"># Drop all columns for groups that meet a percent missingness of greater than or</span>
<span class="co"># equal to 67</span>
<span class="fu"><a href="../reference/drop_na_if.html">drop_na_if</a></span><span class="op">(</span><span class="va">grouped_drop</span>,percent_na <span class="op">=</span> <span class="fl">67</span>,sign<span class="op">=</span><span class="st">"gteq"</span>,
                                    grouping_cols <span class="op">=</span> <span class="st">"ID"</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 3 x 3</span>
<span class="co">#&gt;   ID     Vals Values</span>
<span class="co">#&gt;   &lt;chr&gt; &lt;dbl&gt;  &lt;dbl&gt;</span>
<span class="co">#&gt; 1 A         4      5</span>
<span class="co">#&gt; 2 A        NA      6</span>
<span class="co">#&gt; 3 A        NA      8</span></code></pre></div>
<ul>
<li><code>drop_row_if</code></li>
</ul>
<p>This is similar to <code>drop_na_if</code> but does operations rowwise not columnwise. Compare to the example above:</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Drop rows with at least two NAs</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fu"><a href="../reference/drop_row_if.html">drop_row_if</a></span><span class="op">(</span><span class="va">airquality</span>, sign<span class="op">=</span><span class="st">"gteq"</span>, type<span class="op">=</span><span class="st">"count"</span> , value <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; Dropped 2 rows.</span>
<span class="co">#&gt;   Ozone Solar.R Wind Temp Month Day</span>
<span class="co">#&gt; 1    41     190  7.4   67     5   1</span>
<span class="co">#&gt; 2    36     118  8.0   72     5   2</span>
<span class="co">#&gt; 3    12     149 12.6   74     5   3</span>
<span class="co">#&gt; 4    18     313 11.5   62     5   4</span>
<span class="co">#&gt; 6    28      NA 14.9   66     5   6</span>
<span class="co">#&gt; 7    23     299  8.6   65     5   7</span></code></pre></div>
<p>To drop based on percentages:</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Drops 42 rows</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fu"><a href="../reference/drop_row_if.html">drop_row_if</a></span><span class="op">(</span><span class="va">airquality</span>, type<span class="op">=</span><span class="st">"percent"</span>, value<span class="op">=</span><span class="fl">16</span>, sign<span class="op">=</span><span class="st">"gteq"</span>,
                 as_percent<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; Dropped 42 rows.</span>
<span class="co">#&gt;   Ozone Solar.R Wind Temp Month Day</span>
<span class="co">#&gt; 1    41     190  7.4   67     5   1</span>
<span class="co">#&gt; 2    36     118  8.0   72     5   2</span>
<span class="co">#&gt; 3    12     149 12.6   74     5   3</span>
<span class="co">#&gt; 4    18     313 11.5   62     5   4</span>
<span class="co">#&gt; 7    23     299  8.6   65     5   7</span>
<span class="co">#&gt; 8    19      99 13.8   59     5   8</span></code></pre></div>
<p>For more details, please see the documentation of <code>drop_row_if</code>.</p>
<ul>
<li><code>drop_na_at</code></li>
</ul>
<p>This provides a simple way to drop missing values only at specific columns. It currently only returns those columns with their missing values removed. See usage below. Further details are given in the documentation. It is currently case sensitive.</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fu"><a href="../reference/drop_na_at.html">drop_na_at</a></span><span class="op">(</span><span class="va">airquality</span>,pattern_type <span class="op">=</span> <span class="st">"starts_with"</span>,<span class="st">"O"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt;   Ozone</span>
<span class="co">#&gt; 1    41</span>
<span class="co">#&gt; 2    36</span>
<span class="co">#&gt; 3    12</span>
<span class="co">#&gt; 4    18</span>
<span class="co">#&gt; 5    28</span>
<span class="co">#&gt; 6    23</span></code></pre></div>
<ul>
<li><code>drop_all_na</code></li>
</ul>
<p>This drops columns where all values are missing.</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="va">test2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>ID<span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"A"</span>,<span class="st">"A"</span>,<span class="st">"B"</span>,<span class="st">"A"</span>,<span class="st">"B"</span><span class="op">)</span>, Vals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">4</span>,<span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> 

<span class="fu"><a href="../reference/drop_all_na.html">drop_all_na</a></span><span class="op">(</span><span class="va">test2</span>, grouping_cols<span class="op">=</span><span class="st">"ID"</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 3 x 2</span>
<span class="co">#&gt;   ID     Vals</span>
<span class="co">#&gt;   &lt;chr&gt; &lt;dbl&gt;</span>
<span class="co">#&gt; 1 A         4</span>
<span class="co">#&gt; 2 A        NA</span>
<span class="co">#&gt; 3 A        NA</span></code></pre></div>
<p>Alternatively, we can drop groups where all variables are all NA.</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="va">test2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>ID<span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"A"</span>,<span class="st">"A"</span>,<span class="st">"B"</span>,<span class="st">"A"</span>,<span class="st">"B"</span><span class="op">)</span>, Vals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="fl">5</span><span class="op">)</span><span class="op">)</span> 

<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fu"><a href="../reference/drop_all_na.html">drop_all_na</a></span><span class="op">(</span><span class="va">test2</span>, grouping_cols <span class="op">=</span> <span class="st">"ID"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 0 x 2</span>
<span class="co">#&gt; # ... with 2 variables: ID &lt;chr&gt;, Vals &lt;lgl&gt;</span></code></pre></div>
<ul>
<li><code>dict_recode</code></li>
</ul>
<p>If one would like to recode column values using a “dictionary”, <code>dict_recode</code> provides a simple way to do that. For example, if one would like to convert <code>NA</code> values in <code>Solar.R</code> to 520 and those in <code>Ozone</code> to 42, one simply calls the following:</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fu"><a href="../reference/dict_recode.html">dict_recode</a></span><span class="op">(</span><span class="va">airquality</span>, use_func<span class="op">=</span><span class="st">"recode_na_as"</span>,
                 patterns <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"solar"</span>, <span class="st">"ozone"</span><span class="op">)</span>,
                 pattern_type<span class="op">=</span><span class="st">"starts_with"</span>, values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">520</span>,<span class="fl">42</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt;   Ozone Solar.R Wind Temp Month Day</span>
<span class="co">#&gt; 1    41     190  7.4   67     5   1</span>
<span class="co">#&gt; 2    36     118  8.0   72     5   2</span>
<span class="co">#&gt; 3    12     149 12.6   74     5   3</span>
<span class="co">#&gt; 4    18     313 11.5   62     5   4</span>
<span class="co">#&gt; 5    42     520 14.3   56     5   5</span>
<span class="co">#&gt; 6    28     520 14.9   66     5   6</span></code></pre></div>
<hr>
<p>Please note that the <code>mde</code> project is released with a <a href="https://github.com/Nelson-Gon/mde/blob/master/.github/CODE_OF_CONDUCT.md">Contributor Code of Conduct</a>. By contributing to this project, you agree to abide by its terms.</p>
<p>For further exploration, please <code><a href="https://rdrr.io/r/utils/browseVignettes.html">browseVignettes("mde")</a></code>.</p>
<p>To raise an issue, please do so <a href="https://github.com/Nelson-Gon/mde/issues">here</a></p>
<p>Thank you, feedback is always welcome :)</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Nelson Gonzabato.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
